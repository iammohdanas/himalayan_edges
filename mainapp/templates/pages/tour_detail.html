
{% extends 'base.html' %}
{% load static %}
{% block title %}Tour - {{ tour.name }} {% endblock title %}  
{% block body %}

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.min.js"></script>
<section class="home-slider owl-carousel">
  {% if tour.image %}
  <div class="slider-item" style="background-image: url('{% static 'images/tours_img/' %}{{ tour.image.url }}');">
    <div class="overlay"></div>
    <div class="container">
      <div class="row slider-text align-items-center">
        <div class="col-md-7 col-sm-12 ftco-animate">
          <h1 class="mb-3">{{ tour.name }}</h1>
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  {% if tour.image1 %}
  <div class="slider-item" style="background-image: url('{% static 'images/tours_img/' %}{{ tour.image1.url }}');">
    <div class="overlay"></div>
    <div class="container">
      <div class="row slider-text align-items-center">
        <div class="col-md-7 col-sm-12 ftco-animate">
          <!-- <h1 class="mb-3">Additional Image 1</h1> -->
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  {% if tour.image2 %}
  <div class="slider-item" style="background-image: url('{% static 'images/tours_img/' %}{{ tour.image2.url }}');">
    <div class="overlay"></div>
    <div class="container">
      <div class="row slider-text align-items-center">
        <div class="col-md-7 col-sm-12 ftco-animate">
          <!-- <h1 class="mb-3">Additional Image 2</h1> -->
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  {% if tour.image3 %}
  <div class="slider-item" style="background-image: url('{% static 'images/tours_img/' %}{{ tour.image3.url }}');">
    <div class="overlay"></div>
    <div class="container">
      <div class="row slider-text align-items-center">
        <div class="col-md-7 col-sm-12 ftco-animate">
          <!-- <h1 class="mb-3">Additional Image 3</h1> -->
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  {% if tour.image4 %}
  <div class="slider-item" style="background-image: url('{% static 'images/tours_img/' %}{{ tour.image4.url }}');">
    <div class="overlay"></div>
    <div class="container">
      <div class="row slider-text align-items-center">
        <div class="col-md-7 col-sm-12 ftco-animate">
          <!-- <h1 class="mb-3">Additional Image 4</h1> -->
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</section>
<section class="py-5" style="padding-top: 2%; margin-top: 2%;">
    <div class="container">
        <!-- <aside class="col-lg-6">
          <div class="border rounded-4 mb-3 d-flex justify-content-center">
            <a data-fslightbox="mygalley" class="rounded-4" target="_blank" data-type="image" href="{{ tour.image.url }}">
              <img style="max-width: 100%; max-height: 100vh; margin: auto;" class="rounded-4 fit" src="{% static 'images/tours_img/' %}{{ tour.image.url }}" alt="{{ tour.name }}" />
            </a>
          </div>
          <div class="d-flex justify-content-center mb-3">
            {% if tour.image1 %}
            <a data-fslightbox="mygalley" class="border mx-1 rounded-2" target="_blank" data-type="image" href="{{ tour.image1.url }}">
              <img width="60" height="60" class="rounded-2" src="{% static 'images/tours_img/' %}{{ tour.image1.url }}" alt="Additional Image 1" />
            </a>
            {% endif %}
            {% if tour.image2 %}
            <a data-fslightbox="mygalley" class="border mx-1 rounded-2" target="_blank" data-type="image" href="{% static 'images/tours_img/' %}{{ tour.image2.url }}">
              <img width="60" height="60" class="rounded-2" src="{% static 'images/tours_img/' %}{{ tour.image2.url }}" alt="Additional Image 2" />
            </a>
            {% endif %}
            {% if tour.image3 %}
            <a data-fslightbox="mygalley" class="border mx-1 rounded-2" target="_blank" data-type="image" href="{{ tour.image3.url }}">
              <img width="60" height="60" class="rounded-2" src="{% static 'images/tours_img/' %}{{ tour.image3.url }}" alt="Additional Image 3" />
            </a>
            {% endif %}
            {% if tour.image4 %}
            <a data-fslightbox="mygalley" class="border mx-1 rounded-2" target="_blank" data-type="image" href="{{ tour.image4.url }}">
              <img width="60" height="60" class="rounded-2" src="{% static 'images/tours_img/' %}{{ tour.image4.url }}" alt="Additional Image 4" />
            </a>
            {% endif %}
          </div>
        </aside> -->

        
        
        <main class="col-lg-6">
          <div class="ps-lg-3">
            <br><br>
            <h4 class="title text-dark">{{ tour.name }}</h4>
           
  
            <div class="mb-3">
              <span class="h5">₹{{ tour.price }}</span>
              {% if tour.discount %}
              &nbsp;
              <span class="text-muted text-decoration-line-through" style="color: brown;">Discount : {{ tour.discount }}%</span>
              {% endif %}
            </div>
  
            <p>{{ tour.summary }}</p>
  
            <div class="row">
              <dt class="col-3">Tour Type</dt>
              <dd class="col-9">{{ tour.get_tour_type_display }}</dd>
  
              <dt class="col-3">Popular</dt>
              <dd class="col-9">{{ tour.popular|yesno:"Yes,No" }}</dd>
  
              <dt class="col-3">Location</dt>
              <dd class="col-9">{{ tour.location }}</dd>
            </div>
  
            <hr />
            <form action="{% url 'payment_page' %}" method="POST">
              {% csrf_token %}
              <input type="text" style="display: none;" name="tour_id" value="{{tour.tour_id}}" >
              <button type="submit" class="btn btn-warning shadow-0"> Book Now </button>
            </form>
          </div>
        </main>
    </div>
  </section>
  
  <section class="bg-light border-top py-4">
    <div class="container">
      <div class="row gx-4">
        <div class="col-lg-8 mb-4">
          <div class="border rounded-2 px-3 py-2 bg-white">
            <!-- Pills navs -->
            <ul class="nav nav-pills nav-justified mb-3" id="ex1" role="tablist">
              <li class="nav-item d-flex" role="presentation">
                <a class="nav-link d-flex align-items-center justify-content-center w-100 active" id="ex1-tab-1" data-bs-toggle="pill" href="#ex1-pills-1" role="tab" aria-controls="ex1-pills-1" aria-selected="true">Tour Description</a>
              </li>
              <li class="nav-item d-flex" role="presentation">
                <a class="nav-link d-flex align-items-center justify-content-center w-100" id="ex1-tab-2" data-bs-toggle="pill" href="#ex1-pills-2" role="tab" aria-controls="ex1-pills-2" aria-selected="false">Agent Details</a>
              </li>
            </ul>
            <!-- Pills navs -->
  
            <!-- Pills content -->
            <div class="tab-content" id="ex1-content">
              <!-- Tour Description Tab -->
              <div class="tab-pane fade show active" id="ex1-pills-1" role="tabpanel" aria-labelledby="ex1-tab-1">
                <h5>Tour Description</h5>
                <p>
                  {{tour.tour_descr}}
                </p>
  
                <table class="table border mt-3 mb-2">
                  <tr>
                    <th class="py-2">Location:</th>
                    <td class="py-2">{{tour.location}}</td>
                  </tr>
                  <tr>
                    <th class="py-2">Duration:</th>
                    <td class="py-2">{{tour.tourdays}}</td>
                  </tr>
                  <tr>
                    <th class="py-2">Price:</th>
                    <td class="py-2">₹{{tour.price}}</td>
                  </tr>
                  <tr>
                    <th class="py-2">Rating:</th>
                    <td class="py-2">{{tour.rating}}/5</td>
                  </tr>
                </table>
              </div>
  
              <!-- Agent Details Tab -->
              <div class="tab-pane fade mb-2" id="ex1-pills-2" role="tabpanel" aria-labelledby="ex1-tab-2">
                <h5>Agent Information</h5>
                <p>
                  For inquiries about this tour, please contact our agent:
                </p>
                <ul class="list-unstyled mb-2">
                 {{agent_name}}
                  <li><strong>Agent Name:</strong>  {{tour.agent_name.name}}</li>
                  <li><strong>Email:</strong> {{tour.agent_name.email}}</li>
                  <li><strong>Phone:</strong> {{tour.agent_name.phone_number}}</li>
                </ul>
                <p>
                  Our agents are here to ensure your travel experience is as smooth and enjoyable as possible.
                </p>
              </div>
            </div>
            <div class="tab-content" id="ex1-content">
              <!-- Tour Description Tab -->
              <div class="tab-pane fade show active" id="ex1-pills-1" role="tabpanel" aria-labelledby="ex1-tab-1">
                <h5>Agent Information</h5>
                <p>

                  For inquiries about this tour, please contact our agent:
                </p>
                <table class="table border mt-3 mb-2">
                  <tr>
                      <th class="py-2">Agent Name:</th>
                      <td class="py-2">{{ tour.agent_name.name }}</td>
                  </tr>
                  <tr>
                      <th class="py-2">Email:</th>
                      <td class="py-2">{{ tour.agent_name.email }}</td>
                  </tr>
                  <tr>
                      <th class="py-2">Phone:</th>
                      <td class="py-2">{{ tour.agent_name.phone_number }}</td>
                  </tr>
              </table>
              
                <p>
                  Our agents are here to ensure your travel experience is as smooth and enjoyable as possible.
                </p>
              </div>
            </div>
            <!-- Pills content -->
          </div>
        </div>
  
        <div class="col-lg-4">
          <div class="px-0 border rounded-2 shadow-0">
            <div class="card">
              <div class="card-body" style="height: 500px; overflow-y: auto;"> <!-- Set a height and overflow -->
                <h5 class="card-title">Similar items</h5>
  
                {% for tour in tours %}
                <div class="d-flex mb-3">
                  <a href="{% url 'tour_detail' tour.tour_id %}" class="me-3">
                    <img src="{% static 'images/tours_img/' %}{{ tour.image.url }}" style="min-width: 96px; height: 96px;" class="img-md img-thumbnail" />
                  </a>
                  <div class="info">
                    <a href="#" class="nav-link mb-1">
                      {{ tour.name }}
                    </a>
                    <strong class="text-dark"> &nbsp; ₹{{ tour.price }}</strong>
                  </div>
                </div>
                {% endfor %}
  
              </div>
            </div>
          </div>
        </div>
  
      </div>
    </div>
  </section>
  
  {% endblock body %}
